import json
import random

# تحميل قائمة الترندات الذكية من ملف JSON
with open("trends_trigger.json", "r", encoding="utf-8") as file:
    trends_data = json.load(file)

# ترندات مبنية على كلمات مفتاحية داخل الكود
TREND_KEYWORDS = {
    "شنو الترند": [
        "الترند اللي شغال هسه: البنات بقولو 'كول قلبي' بدل 'كسر قلبي' 😂💔 جربوها!",
        "الناس كلها بتغني: 'قلبي دايرلو ميكانيكي' 🛠️😂 منو حافظها؟",
        "ترند اليوم: كل زول يرسل صورة من أيام الابتدائي 🤓📸",
        "شغالين على تحدي 'لو كنت...' 🧠 مثال: لو كنت لون، حتكون شنو؟",
        "ترند الكراش الخفي 😶‍🌫️ أرسل نقطة لو عندك كراش في القروب 😂",
        "جربنا ترند 'إيموجي يمثل حالتك الآن' 😶‍🌫️👀💃🏾"
    ],
    "الترند شنو": [
        "الترند اللي مولّع: كل زول يكتب أغرب اسم سمعوهو 😂",
        "يلا نعمل ترند الصور القديمة: ورونا صورة من أيام الثانوي 📚",
        "الناس بتكتب أسرع رد يخطر على بالك لما تسمع كلمة 'كسلا' 😅",
        "ترند اليوم: أكتب جملة من غير ما تستخدم حرف الألف 😮",
        "الترند داير ناس مجانين: أكتب رد بصيغة جدتك 😆",
        "شغالين على تحدي 'لو كنت أغنية، حتكون شنو؟' 🎶"
    ],
    "شنو الحاصل": [
        "الحاصل؟ في ترند جديد بيقول أكتب شعورك في كلمة واحدة 🫣",
        "الحاصل إنو البوت دا بقى عندو ترند خاص بيهو 😂🔥",
        "الجو العام بقول نعمل ترند صور بدون فلتر 📸",
        "الحاصل؟ الناس كلها داخلة ترند 'سرك في بير' 🕳️😂",
        "هسي الناس بيسألوا: 'شنو الحاجة الندمت عليها بعد ما قلتها؟' 🫢",
        "الحاصل؟ في ترند اسمو 'لو الزمن رجع بيك'، أكتب ردك ✍🏽"
    ],
    "خمج": [
        "الخمج دا ما طبيعي 😂😂 نعمل ترند أحسن!",
        "شكلو لازم نغير الجو، ترند سريع؟ 😏",
        "الخمج جاكم، نعمل ترند 'سؤال محرج لكل عضو'؟ 😅",
        "الخمج دا علاجو تحدي سريع: منو يعرف يضحكنا؟",
        "الجو خمج؟ نبدأ ترند صور غريبة من قوقل 🧐"
    ],
    "طفشان": [
        "الطفش دا ما بحلو إلا ترند جديد 😂",
        "لو طفشان، جاك ترند: أكتب حلمك الغريب الأخير 😴",
        "الطفش؟ أكتب أول حاجة في بالك هسه 🧠",
        "في ترند ظريف: أكتب شي بتعملو وانت زعلان 🤨",
        "الطفشانين يجربوا ترند 'كم تساوي مشاعرك بالأرقام؟' 🤓"
    ],
    "ملل": [
        "الملل؟ جا ترند: ورينا أغرب معلومة بتعرفها 🧠",
        "الناس المملة تعمل ترند 'أكتر أكلة بتحبها وليه؟' 🍲",
        "جا ترند: كل واحد يختار إيموجي يوصفه 💁🏽‍♀️",
        "علاج الملل؟ أكتب شي بتتمنى لو كان عندك هسه ✨",
        "لو زهجان، أكتب رسالة لنفسك بعد 5 سنين ✍🏾"
    ]
}

# دالة التحقق من الترند الذكي من ملف JSON
def check_trend_trigger(message_text):
    message_text = message_text.lower()
    for trend in trends_data:
        keywords = trend.get("keywords", [])
        for keyword in keywords:
            if keyword.lower() in message_text:
                return trend.get("response")
    return None

# دالة التحقق من الترندات داخل TREND_KEYWORDS
def check_keyword_trend(message_text):
    message_text = message_text.lower()
    for keyword in TREND_KEYWORDS:
        if keyword in message_text:
            return random.choice(TREND_KEYWORDS[keyword])
    return None
